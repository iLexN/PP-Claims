'use strict';var helpers=require('../helpers');var cacheOnly=require('./cacheOnly');function fastest(request,values,options){helpers.debug('Strategy: fastest ['+request.url+']',options);return new Promise(function(resolve,reject){var rejected=false;var reasons=[];var maybeReject=function(reason){reasons.push(reason.toString());if(rejected){reject(new Error('Both cache and network failed: "'+
reasons.join('", "')+'"'));}else{rejected=true;}};var maybeResolve=function(result){if(result instanceof Response){resolve(result);}else{maybeReject('No result returned');}};helpers.fetchAndCache(request.clone(),options).then(maybeResolve,maybeReject);cacheOnly(request,values,options).then(maybeResolve,maybeReject);});}
module.exports=fastest;